<div>
    <div
        class="border-[rgba(131, 166, 211, 0.64)] border-[2px] border-solid bg-white rounded-[12px] overflow-hidden shadow-[2px_0px_5px_0px_rgba(1,87,155,0.25)]">

        <div class="p-3">
            <div class="grid grid-cols-[fit-content(20px)_1fr] item-center gap-2">
                <span nz-icon nzType="keySquareIcon:antd" class="col-span-1 icon w-fit text-[16px] cursor-pointer mt-1"
                    nzTheme="outline"></span>
                <div class="col-span-1">
                    <div class="flex items-center">
                        <span class="text-[16px] font-medium truncate">{{ keyResultData?.title || 'Thiết kế 10 giao diện trong tuần' }}</span>
                        <span nz-icon nzType="edit" class="ml-2 cursor-pointer text-primary" 
                            (click)="handleOpenEditKeyResult()" nzTheme="outline"></span>
                    </div>
                    <div class="mt-1">
                        <nz-progress [nzPercent]="30" nzStrokeColor="#FFB800" [nzStrokeWidth]="6"></nz-progress>
                    </div>
                    <div class="flex justify-between items-center mt-1">
                        <div class="flex">
                            <div *ngFor="let item of listMember let i = index">
                                <img *ngIf="i<4" [src]="item.img" [alt]="item"
                                    class="size-4 border-white border-2 rounded-[50%]" #member>
                            </div>
                            <div class="flex justify-center items-center size-4 text-[7px] border-white border-2 rounded-[50%] bg-primary"
                                #member>
                                <span class="text-white">+{{memberCount}}</span>
                            </div>
                        </div>
                        <span class="text-red-500 text-xs">{{ keyResultData?.dueDate | date:'dd/MM/yyyy'}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Edit Key Result Popup -->
<app-popup-add-edit-key-result
    *ngIf="visibleEditKeyResult"
    [isVisible]="visibleEditKeyResult"
    [keyResultId]="keyResultData?.id"
    [objectId]="objectId"
    (visiblePopUpAddEditKeyResult)="handleVisibleKeyResultEdit($event)"
    (keyResultUpdated)="handleKeyResultUpdated($event)"
    (keyResultDeleted)="handleKeyResultDeleted($event)">
</app-popup-add-edit-key-result>