<nz-modal nzWidth="800" [(nzVisible)]="isVisiblePopUpEditManagement" nzCentered [nzContent]="modalContent"
    [nzFooter]="modalFooter" (nzOnCancel)="handleCancel()" [nzTitle]="modalTitle" class="custom-modal">

    <ng-template #modalTitle>
        <div class="flex items-center gap-2">
            <i nz-icon nzType="edit" nzTheme="outline" class="text-primary text-xl"></i>
            <span class="text-xl font-semibold text-gray-800">Chỉnh sửa thông tin người dùng</span>
        </div>
    </ng-template>

    <ng-template #modalContent>
        <div class="p-6">
            <form [formGroup]="editForm" class="space-y-6">
                <!-- Basic Information Section -->
                <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <h3 class="text-lg font-medium mb-6 text-gray-800 flex items-center gap-2">
                        <i nz-icon nzType="user" nzTheme="outline" class="text-primary"></i>
                        <span>Thông tin cơ bản</span>
                    </h3>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tên đăng nhập</label>
                            <nz-input-group>
                                <input nz-input formControlName="userName" 
                                    class="w-full h-11 rounded-lg border-gray-300 bg-gray-50 text-gray-600"
                                    readonly>
                            </nz-input-group>
                        </div>
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tổ chức</label>
                            <nz-input-group>
                                <input nz-input formControlName="tenantName" 
                                    class="w-full h-11 rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary"
                                    placeholder="Nhập tên tổ chức">
                            </nz-input-group>
                        </div>
                    </div>
                </div>

                <!-- Contact Information Section -->
                <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <h3 class="text-lg font-medium mb-6 text-gray-800 flex items-center gap-2">
                        <i nz-icon nzType="mail" nzTheme="outline" class="text-primary"></i>
                        <span>Thông tin liên hệ</span>
                    </h3>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <nz-input-group>
                                <input nz-input formControlName="email" 
                                    class="w-full h-11 rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary"
                                    placeholder="Nhập địa chỉ email">
                            </nz-input-group>
                            <div class="text-red-500 text-xs mt-1" *ngIf="editForm.get('email')?.touched && editForm.get('email')?.errors?.['email']">
                                Vui lòng nhập email hợp lệ
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Số điện thoại</label>
                            <nz-input-group>
                                <input nz-input formControlName="numberPhone" 
                                    class="w-full h-11 rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary"
                                    placeholder="Nhập số điện thoại">
                            </nz-input-group>
                        </div>
                    </div>
                </div>

                <!-- Account Settings Section -->
                <div class="bg-white p-6 rounded-lg border border-gray-200 shadow-sm">
                    <h3 class="text-lg font-medium mb-6 text-gray-800 flex items-center gap-2">
                        <i nz-icon nzType="setting" nzTheme="outline" class="text-primary"></i>
                        <span>Cài đặt tài khoản</span>
                    </h3>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phân quyền</label>
                            <nz-select formControlName="roleUser" 
                                class="w-full h-11 rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary"
                                placeholder="Chọn phân quyền">
                                <nz-option nzValue="admin" nzLabel="Quản trị viên"></nz-option>
                                <nz-option nzValue="user" nzLabel="Người dùng"></nz-option>
                            </nz-select>
                        </div>
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Trạng thái</label>
                            <nz-select formControlName="status" 
                                class="w-full h-11 rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary"
                                placeholder="Chọn trạng thái">
                                <nz-option nzValue="active" nzLabel="Hoạt động"></nz-option>
                                <nz-option nzValue="inactive" nzLabel="Không hoạt động"></nz-option>
                            </nz-select>
                        </div>
                        <!-- <div class="form-group col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ngày kích hoạt</label>
                            <nz-input-group>
                                <input nz-input formControlName="activationDate" 
                                    class="w-full h-11 rounded-lg border-gray-300 bg-gray-50 text-gray-600"
                                    readonly>
                            </nz-input-group>
                        </div> -->
                    </div>
                </div>
            </form>
        </div>
    </ng-template>

    <ng-template #modalFooter>
        <div class="flex justify-end gap-4">
            <button nz-button 
                class="px-8 h-11 rounded-lg border border-gray-300 hover:bg-gray-100 text-gray-700 font-medium"
                (click)="handleCancel()">
                Hủy
            </button>
            <button nz-button nzType="primary"
                class="px-8 h-11 rounded-lg bg-primary border-none hover:opacity-90 text-white font-medium"
                (click)="handleOk()">
                {{'Button.confirm'| translate }}
            </button>
        </div>
    </ng-template>
</nz-modal>

